import{r,j as e,L as a}from"./index-BtO8Pqls.js";import{s as g,L as i}from"./Logo26Building-CPhF6ata.js";function u(){const[l,d]=r.useState([]),[m,n]=r.useState(!0),[x,o]=r.useState("");r.useEffect(()=>{c()},[]);const c=async()=>{try{n(!0);const{data:s,error:t}=await g.from("notices").select(`
          *,
          profiles (
            name,
            email
          )
        `).eq("is_published",!0).order("is_important",{ascending:!1}).order("created_at",{ascending:!1});if(t)throw t;d(s||[])}catch(s){console.error("공지사항 로딩 오류:",s),o("공지사항을 불러오는데 실패했습니다.")}finally{n(!1)}},h=s=>new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return m?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsx(a,{to:"/",className:"flex items-center space-x-3",children:e.jsx(i,{size:40})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(a,{to:"/",className:"text-gray-600 hover:text-gray-900 font-medium",children:"홈으로"})})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t))})]})})})]}):x?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsx(a,{to:"/",className:"flex items-center space-x-3",children:e.jsx(i,{size:40})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(a,{to:"/",className:"text-gray-600 hover:text-gray-900 font-medium",children:"홈으로"})})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("i",{className:"ri-error-warning-line text-6xl text-red-500 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"오류가 발생했습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"다시 시도"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsx(a,{to:"/",className:"flex items-center space-x-3",children:e.jsx(i,{size:40})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(a,{to:"/",className:"text-gray-600 hover:text-gray-900 font-medium",children:"홈으로"})})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"공지사항"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",l.length,"개의 공지사항"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-notification-line text-6xl text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"공지사항이 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"새로운 공지사항이 등록되면 여기에 표시됩니다."})]}):e.jsx("div",{className:"space-y-6",children:l.map(s=>e.jsx(a,{to:`/notices/${s.id}`,className:"block group",children:e.jsx("div",{className:"border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-200 group-hover:bg-blue-50/30",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.is_important&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[e.jsx("i",{className:"ri-fire-line mr-1"}),"중요"]}),e.jsx("span",{className:"text-sm text-gray-500",children:h(s.created_at)}),s.profiles&&e.jsxs("span",{className:"text-sm text-gray-500",children:["by ",s.profiles.name]})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 mb-3",children:s.title}),e.jsxs("p",{className:"text-gray-600 line-clamp-3",children:[s.content.replace(/<[^>]*>/g,"").substring(0,200),s.content.length>200&&"..."]})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:s.view_count})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-xl group-hover:translate-x-1 transition-transform duration-200"})]})]})})},s.id))})]})})]})}export{u as default};
