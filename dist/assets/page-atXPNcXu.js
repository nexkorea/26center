import{r as i,u as f,j as e,L as n}from"./index-BHoggfyQ.js";import{s as r,L as y}from"./Logo26Building-BVyeSWE_.js";function k(){const[v,m]=i.useState(null),[d,x]=i.useState(null),[a,o]=i.useState([]),[h,u]=i.useState(!0),c=f();i.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:{user:s}}=await r.auth.getUser();if(!s){c("/login");return}m(s);const{data:l}=await r.from("profiles").select("*").eq("id",s.id).single();l&&x(l);const{data:t}=await r.from("move_in_cards").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});t&&o(t)}catch(s){console.error("Error:",s)}finally{u(!1)}},p=async()=>{await r.auth.signOut(),c("/")},j=s=>{const t={pending:{text:"검토중",class:"bg-yellow-100 text-yellow-800"},approved:{text:"승인됨",class:"bg-green-100 text-green-800"},rejected:{text:"반려됨",class:"bg-red-100 text-red-800"}}[s];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.class}`,children:t.text})},b=s=>{switch(s){case"owner":return"소유주";case"tenant":return"임차인";case"other":return"기타";default:return"미분류"}},N=s=>{switch(s){case"owner":return"ri-home-4-line";case"tenant":return"ri-building-line";case"other":return"ri-question-line";default:return"ri-question-line"}};return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{to:"/",className:"flex items-center",children:e.jsx(y,{size:40})}),e.jsx("span",{className:"ml-4 text-gray-600",children:"입주자 대시보드"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-gray-700",children:["안녕하세요, ",d?.name,"님"]}),e.jsx("button",{onClick:p,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer whitespace-nowrap",children:"로그아웃"})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"내 입주카드"}),e.jsxs("div",{className:"flex space-x-3",children:[a.length===1&&a[0].status==="pending"&&e.jsxs(n,{to:`/move-in-card/edit/${a[0].id}`,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"수정하기"]}),a.length===0&&e.jsxs(n,{to:"/move-in-card/new",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"새 입주카드 작성"]})]})]}),a.length===0?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("i",{className:"ri-file-list-3-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"입주카드가 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"첫 번째 입주카드를 작성해보세요."}),e.jsx(n,{to:"/move-in-card/new",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium cursor-pointer whitespace-nowrap",children:"입주카드 작성하기"})]}):e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.map(s=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:s.company_name}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.business_type})]}),j(s.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"입주자 유형"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:`${N(s.tenant_type||"tenant")} text-blue-600`}),e.jsx("span",{className:"text-gray-900 font-medium",children:b(s.tenant_type||"tenant")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"입주 위치"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-building-line text-blue-600"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[s.floor_number,"층 ",s.room_number,"호"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"입주일"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-calendar-line text-blue-600"}),e.jsx("span",{className:"text-gray-900 font-medium",children:new Date(s.move_in_date).toLocaleDateString("ko-KR")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-user-line text-blue-600"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.contact_person})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"연락처"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line text-blue-600"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.contact_phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-mail-line text-blue-600"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.contact_email})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"직원 수"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-group-line text-blue-600"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[s.employee_count,"명"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"주차 정보"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-car-line text-blue-600"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.parking_needed?`${s.parking_count}대`:"불필요"})]})]})]}),s.parking_needed&&s.vehicle_numbers&&s.vehicle_numbers.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"등록된 차량번호"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(s.vehicle_numbers||[]).map((l,t)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t+1,"번"]}),e.jsx("span",{className:"text-gray-900 font-mono",children:l})]},t))})]}),s.special_requests&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"특별 요청사항"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.special_requests})})]}),s.admin_notes&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"관리자 메모"}),e.jsx("div",{className:"p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.admin_notes})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),"신청일: ",new Date(s.created_at).toLocaleDateString("ko-KR")]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"수정일: ",new Date(s.updated_at).toLocaleDateString("ko-KR")]})]})})})]},s.id))})]})})]})}export{k as default};
